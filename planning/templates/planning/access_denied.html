{% extends "index.html" %}

{% block title %}
    Accès Restreint - {{ plan.titre|default:"Plan d'Action" }}
{% endblock %}

{% block content %}
    <div class="restricted-page d-flex align-items-center justify-content-center min-vh-100 py-4 py-md-5">
        <div class="restricted-access-wrapper text-center animate-fade-in w-100" style="max-width: 580px;">
            
            <!-- Icône -->
            <div class="restricted-access-icon mb-3 mb-md-4">
                <svg width="90" height="90" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="animate-bounce">
                    <circle cx="12" cy="12" r="10" stroke="#ff6200" stroke-width="2"/>
                    <path d="M15 9L9 15M9 9l6 6" stroke="#ff6200" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>

            <!-- Titre -->
            <h1 class="restricted-access-title text-orange fw-bold mb-3 mb-md-4 animate-slide-down" style="font-size: 2.4rem; line-height: 1.1;">
                Accès Restreint
            </h1>

            <!-- Message -->
            <div class="restricted-access-alert alert alert-danger shadow-lg p-4 p-md-5 mb-4 mb-md-5" role="alert">
                <h3 class="restricted-access-message-title fw-bold text-dark mb-3" style="font-size: 1.4rem;">
                    {{ message|default:"Vous n’avez pas les droits nécessaires." }}
                </h3>
                <p class="restricted-access-message-text text-muted mb-0" style="font-size: 1.05rem; line-height: 1.45;">
                    Cette section est réservée aux utilisateurs autorisés.<br class="d-none d-sm-inline">
                    Retournez à l’accueil ou contactez l’administrateur.
                </p>
            </div>

            <!-- Bouton – toujours visible -->
            <div class="restricted-access-actions animate-fade-in-delay">
                <a href="{% url 'accueil' %}" class="btn-restricted-home btn btn-secondary btn-lg px-5 py-3 fw-bold text-uppercase">
                    <i class="fas fa-home me-2"></i> Retour à l'accueil
                </a>
            </div>
        </div>
    </div>
{% endblock %}

{% block style %}
    <style>
        .restricted-page {
            background: linear-gradient(135deg, rgba(255, 98, 0, 0.04) 0%, #ffffff 100%);
        }

        .restricted-access-wrapper {
            padding: 20px 15px;
            border-radius: 16px;
        }

        .restricted-access-icon svg {
            transition: transform 0.3s ease;
        }
        .restricted-access-icon:hover svg {
            transform: scale(1.08);
        }

        .restricted-access-alert {
            background-color: #fff5f5;
            border: 2px solid #f8d7da;
            color: #721c24;
            border-radius: 16px;
            position: relative;
            overflow: hidden;
            transition: all 0.25s ease;
        }
        .restricted-access-alert::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 4px;
            background: linear-gradient(to right, #ff6200, #f8d7da);
        }
        .restricted-access-alert:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.12);
        }

        .btn-restricted-home {
            background: linear-gradient(45deg, #6c757d, #8d959c);
            border: none;
            border-radius: 50px;
            padding: 14px 48px;
            font-size: 1.15rem;
            color: white;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            box-shadow: 0 5px 16px rgba(0,0,0,0.22);
            transition: all 0.28s ease;
        }
        .btn-restricted-home:hover {
            background: linear-gradient(45deg, #8d959c, #6c757d);
            transform: translateY(-3px) scale(1.04);
            box-shadow: 0 10px 25px rgba(0,0,0,0.28);
        }
        .btn-restricted-home i {
            transition: transform 0.3s ease;
        }
        .btn-restricted-home:hover i {
            transform: translateX(-4px);
        }

        /* Animations rapides */
        .animate-fade-in    { animation: fadeIn    0.9s ease-out forwards; }
        .animate-fade-in-delay { animation: fadeIn 1s ease-out forwards 0.25s; opacity: 0; }
        .animate-slide-down { animation: slideDown 0.9s ease-out forwards; }

        @keyframes fadeIn  { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }

        /* Mobile-first ajustements */
        @media (max-width: 576px) {
            .restricted-access-title        { font-size: 2.1rem !important; }
            .restricted-access-message-title { font-size: 1.25rem !important; }
            .restricted-access-message-text  { font-size: 1rem !important; }
            .btn-restricted-home             { padding: 12px 36px; font-size: 1.05rem; }
            .restricted-access-icon svg      { width: 80px; height: 80px; }
            .restricted-access-wrapper       { padding: 20px 12px; }
        }

        @media (max-height: 620px) {
            /* Très petits écrans en hauteur (ex: iPhone SE, vieux Android) */
            .restricted-access-title        { font-size: 1.9rem; margin-bottom: 1rem; }
            .restricted-access-alert        { padding: 1.25rem; margin-bottom: 1.25rem; }
            .restricted-access-icon         { margin-bottom: 1rem; }
            .btn-restricted-home            { padding: 10px 32px; font-size: 1rem; }
        }
    </style>
{% endblock %}