{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>MFB - DPSE</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{% static 'general/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'general/vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'general/vendor/aos/aos.css' %}" rel="stylesheet">
  <link href="{% static 'general/vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">
  <link href="{% static 'general/vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="{% static 'general/css/main.css' %}" rel="stylesheet">
  
  {% block style %}


  {% endblock %}

</head>

<body class="index-page">

  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">

      <a href="{% url 'mfb_presentation' %}" class="logo d-flex align-items-center me-auto me-lg-0">
        <!-- Uncomment the line below if you also wish to use an image logo -->
        <!-- <img src="{% static 'general/images/logo.png' %}" alt=""> -->
        <h1 class="sitename">La DPSE</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="{% url 'accueil' %}">Accueil</a></li>
          <li class="dropdown"><a href="#"><span>Actualité</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="{% url 'news_list' %}">A la Une</a></li>
              <li><a href="{% url 'add_news' %}">Publier une activité</a></li>
            </ul>
          </li>
          <li class="dropdown"><a href="#"><span>Documents</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="{% url 'document_list' document_type='mfb' %}">Révue du MFB</a></li>
              <li class="dropdown"><a href="#"><span>Documents DPSE</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
                <ul>
                  <li><a href="{% url 'document_list' document_type='dpse_planification' %}">Prospectives et Planification</a></li>
                  <li><a href="{% url 'document_list' document_type='dpse_suivi_evaluation' %}">Programmation et Suivi-Evaluation</a></li>
                  <li><a href="{% url 'document_list' document_type='dpse_statistiques' %}">Etudes et Statistiques</a></li>
                  <li><a href="{% url 'document_list' document_type='dpse_qualite' %}">Qualité et Normalisation</a></li>
                </ul>
              </li>
              <li><a href="{% url 'document_list' document_type='dpse_archives' %}">Archives DPSE</a></li>
            </ul>
          </li>
          <li class="dropdown"><a href="#"><span>Plans d'actions</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="{% url 'plan_action_list' %}">Catalogue des plans d'actions</a></li>
              <li><a href="{% url 'task_list' %}">Consulter mes activités</a></li>
              <li><a href="{% url 'add_plan_action' %}">Créer un plan d'actions</a></li>
            </ul>
          </li>
          <li class="dropdown"><a href="#"><span>Stats MFB</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="{% url 'stats' %}">Tableau de bord</a></li>
              <li><a href="#">Cartis MFB</a></li>
              <li><a href="#">Annuaire statistique</a></li>
            </ul>
          </li>
          <li class="dropdown"><a href="#"><span>Voir plus</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="{% url 'quality' %}">Qualité et Normalisation</a></li>
              <li><a href="{% url 'faq' %}">Foire aux questions</a></li>
              <li><a href="{% url 'blog_list' %}">Blog du MFB</a></li>
              <li><a href="{% url 'glossaire' %}">Glossaire du MFB</a></li>
            </ul>
          </li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

      {% if request.user.is_authenticated %}
          <a class="d-flex align-items-center text-white" href="#" data-bs-toggle="modal" data-bs-target="#profileModal">
              {% if request.user.photo %}
                  <img src="{{ request.user.photo.url }}" class="rounded-circle" width="30" height="30" alt="Photo" style="margin-right: 10px;">
              {% else %}
                  <div class="rounded-circle bg-primary text-white d-flex justify-content-center align-items-center"
                      style="width: 30px; height: 30px; font-size: 14px; font-weight: bold; margin-right: 10px;">
                      {{ request.user.first_name|default:''|slice:":1" }}{{ request.user.last_name|default:''|slice:":1" }}
                  </div>
              {% endif %}
              <span>{{ request.user.first_name }} {{ request.user.last_name }}</span>
          </a>
      {% else %}
          <a class="d-flex align-items-center text-white" href="#" data-bs-toggle="modal" data-bs-target="#loginModal">Se connecter</a>
      {% endif %}
    </div>
  </header>

  <!-- Modale de confirmation -->
  <div class="modal fade" id="profileModal" tabindex="-1" aria-labelledby="profileModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
          <!-- Header de la modale -->
          <div class="modal-header">
              <h5 class="modal-title" id="profileModalLabel">Que souhaitez-vous faire ?</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>

          <!-- Corps de la modale -->
          <div class="modal-body">
              <p>Voulez-vous voir votre profil ou vous déconnecter ?</p>
          </div>

          <!-- Footer de la modale -->
          <div class="modal-footer">
              <!-- Lien vers le profil utilisateur -->
              <a href="{% url 'profil_utilisateur' %}" class="btn btn-primary">Voir mon profil</a>
                          
              <!-- Lien vers la déconnexion -->
              <a href="{% url 'deconnexion' %}" class="btn btn-danger">Déconnexion</a>
          </div>
      </div>
    </div>
  </div>

  <!-- Modale pour la connexion ou inscription -->
  <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Se connecter ou s'inscrire</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Étape 1 : Choix entre nouvelle inscription ou connexion -->
                <div id="choiceStep">
                    <h6>Que souhaitez-vous faire ?</h6>
                    <button class="btn btn-primary mb-2" id="newAccountBtn">Nouvelle inscription</button>
                    <button class="btn btn-secondary mb-2" id="existingAccountBtn">Connexion à un compte existant</button>
                </div>
                <!-- Étape 2 : Choix du type d'utilisateur pour l'inscription -->
                <div id="userTypeStep1" style="display: none;">
                    <h6>Choisissez votre type d'utilisateur :</h6>            
                    <button type="button" class="btn btn-primary" id="membreBtn1" data-bs-dismiss="modal">Membre</button>
                    <button type="button" class="btn btn-primary" id="visiteurBtn1" data-bs-dismiss="modal">Visiteur</button>
                    <button class="btn btn-link" id="backToChoiceStep1">Retour</button> <!-- Bouton Retour -->
                </div>
                <!-- Étape 2 : Choix du type d'utilisateur pour la connexion -->
                <div id="userTypeStep2" style="display: none;">
                    <h6>Choisissez votre type d'utilisateur :</h6>
                    <button type="button" class="btn btn-primary" id="membreBtn2" data-bs-dismiss="modal">Membre</button>
                    <button type="button" class="btn btn-primary" id="visiteurBtn2" data-bs-dismiss="modal">Visiteur</button>
                    <button class="btn btn-link" id="backToChoiceStep2">Retour</button> <!-- Bouton Retour -->
                </div>
            </div>
        </div>
    </div>
  </div>
  
  <!-- JavaScript pour gérer les étapes et le processus -->
  <script>
    function resetModal() {
        // Réinitialiser toutes les étapes à l'affichage initial
        document.getElementById('choiceStep').style.display = 'block';
        document.getElementById('userTypeStep1').style.display = 'none';
        document.getElementById('userTypeStep2').style.display = 'none';
    }
    
    // Quand l'utilisateur choisit de créer un nouveau compte
    document.getElementById('newAccountBtn').onclick = function() {
        document.getElementById('choiceStep').style.display = 'none';
        document.getElementById('userTypeStep1').style.display = 'block';
    };
    
    // Quand l'utilisateur choisit de se connecter à un compte existant
    document.getElementById('existingAccountBtn').onclick = function() {
        document.getElementById('choiceStep').style.display = 'none';
        document.getElementById('userTypeStep2').style.display = 'block';
    };
    
    // Bouton pour revenir à l'étape de choix initiale (nouveau compte ou connexion)
    document.getElementById('backToChoiceStep1').onclick = function() {
        document.getElementById('userTypeStep1').style.display = 'none';
        document.getElementById('choiceStep').style.display = 'block';
    };
    
    document.getElementById('backToChoiceStep2').onclick = function() {
        document.getElementById('userTypeStep2').style.display = 'none';
        document.getElementById('choiceStep').style.display = 'block';
    };

    document.getElementById('membreBtn1').onclick = function() {
    window.location.href = "{% url 'inscription_membre' %}";  // Redirige vers la page d'inscription membre
    };

    document.getElementById('visiteurBtn1').onclick = function() {
        window.location.href = "{% url 'inscription_visiteur' %}";  // Redirige vers la page d'inscription visiteur
    };

    document.getElementById('membreBtn2').onclick = function() {
        window.location.href = "{% url 'connexion_membre' %}";  // Redirige vers la page de connexion membre
    };

    document.getElementById('visiteurBtn2').onclick = function() {
        window.location.href = "{% url 'connexion_visiteur' %}";  // Redirige vers la page de connexion visiteur
    };

    
    // Réinitialiser la modale lorsqu'elle est ouverte (show)
    var loginModal = document.getElementById('loginModal');
    loginModal.addEventListener('shown.bs.modal', function () {
        resetModal();
    });
  </script>

  <br>
  <br>
  <br>
  {% block content %}


  {% endblock %}
  <br>
  <br>
  <br>
  <footer id="footer" class="footer dark-background">
    <div class="footer-top">
      <div class="container">
        <div class="row gy-6" style="justify-content: center" >
          <div class="col-lg-3 col-md-6 footer-about">
            <a href="#" class="logo d-flex align-items-center">
              <span class="sitename">DPSE</span>
            </a>
            <div class="footer-contact pt-3">
              <p>63 Avenue Marchand</p>
              <p>Abidjan-Plateau, Côte d'Ivoire</p>
              <p class="mt-3"><strong>Tel :</strong> <a href="tel:+22527203302538">+225 27 203 302 538</a></p>
              <p><strong>Email :</strong> <a href="mailto:c.infomef@gmail.com">c.infomef@gmail.com</a>
              </p>
            </div>
            <div class="social-links d-flex mt-4">
              <a href=""><i class="bi bi-twitter-x"></i></a>
              <a href=""><i class="bi bi-facebook"></i></a>
              <a href=""><i class="bi bi-instagram"></i></a>
              <a href=""><i class="bi bi-linkedin"></i></a>
            </div>
          </div>

          <div class="col-lg-2 col-md-3 footer-links">
            <h4>A propos de nous</h4>
            <ul>
              <li><i class="bi bi-chevron-right"></i> <a href="https://finances.gouv.ci//"> Le Ministère</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="#"> La DPSE</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="#"> Objectif Stratégique</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="#"> Notre vision</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="#"> Manuel de procédure</a></li>
            </ul>
          </div>

          <div class="col-lg-2 col-md-3 footer-links">
            <h4>Nos Services</h4>
            <ul>
              <li><i class="bi bi-chevron-right"></i> <a href="#"> Prospectives et Planification</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="#"> Programmation et <br> Suivi-Evaluation</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="#"> Statistiques</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="#"> Qualité et Normalisation</a></li>
            </ul>
          </div>

          <div class="col-lg-2 col-md-3 footer-links">
            <h4>Cadre de référence</h4>
            <ul>
              <li><i class="bi bi-chevron-right"></i> <a href="#"> Feuille de Route</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="https://www.gouv.ci/_actualite-article.php?recordID=13585&d=1#:~:text=L'objectif%20principal%20du%20PND,interm%C3%A9diaire%20de%20la%20tranche%20sup%C3%A9rieure."> Plan National de Développement</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="https://au.int/fr/agenda2063/vue-ensemble"> Agenda 2063</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="https://documents.economie-ivoirienne.ci/index.php?p=fstream-pdf&fid=12&bid=10"> Vision 2030</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="https://www.sosve.org/objectifs-de-developpement-durable-post-2015/?gad_source=1&gclid=CjwKCAiA2cu9BhBhEiwAft6IxA2fE1QNz7JlR_1soS0ce5xEWYhKibB-uYYagi2VynAVzOF72M5pGRoC4oUQAvD_BwE"> ODD</a></li>
            </ul>
          </div>

          <div class="col-lg-2 col-md-3 footer-links">
            <h4>Liens utiles</h4>
            <ul>
              <li><i class="bi bi-chevron-right"></i> <a href="https://www.finances.gouv.ci/"> Ministère de l'Économie et des Finances</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="https://budget.gouv.ci/"> Ministère du Budget et du Portefeuille de l'État</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="https://www.dgi.gouv.ci/"> Direction Générale des Impôts (DGI)</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="https://www.douanes.ci/"> Direction Générale des Douanes (DGD)</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="copyright">
      <div class="container text-center">
        <p>© <span>Copyright</span> <strong class="px-1 sitename">GP</strong> <span>All Rights Reserved</span></p>
        <div class="credits">
          <!-- All the links in the footer should remain intact. -->
          <!-- You can delete the links only if you've purchased the pro version. -->
          <!-- Licensing information: https://bootstrapmade.com/license/ -->
          <!-- Purchase the pro version with working PHP/AJAX contact form: [buy-url] -->
          Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a> Distributed by <a href="https://themewagon.com">ThemeWagon</a>
        </div>
      </div>
    </div>

  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="{% static 'general/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'general/vendor/php-email-form/validate.js' %}"></script>
  <script src="{% static 'general/vendor/aos/aos.js' %}"></script>
  <script src="{% static 'general/vendor/swiper/swiper-bundle.min.js' %}"></script>
  <script src="{% static 'general/vendor/glightbox/js/glightbox.min.js' %}"></script>
  <script src="{% static 'general/vendor/imagesloaded/imagesloaded.pkgd.min.js' %}"></script>
  <script src="{% static 'general/vendor/isotope-layout/isotope.pkgd.min.js' %}"></script>
  <script src="{% static 'general/vendor/purecounter/purecounter_vanilla.js' %}"></script>

  <!-- Main JS File -->
  <script src="{% static 'general/js/main.js' %}"></script>

</body>

</html>
