!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="3ffd8a56-e840-4050-a71d-60d3b3dc801e",e._sentryDebugIdIdentifier="sentry-dbid-3ffd8a56-e840-4050-a71d-60d3b3dc801e")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[28],{34573:function(){},86585:function(){},73533:function(e,t,n){"use strict";let r;n.d(t,{mU:function(){return r},useSession:function(){return g}});var s=n(91124),o=n(14677),a=n(67629),i=n(11883),u=n(79468),c=n(88926),f=n(27582),l=n(31750);let d=(0,u.createContext)(void 0),p=e=>(0,c.M)()(t=>({user:null==e?void 0:e.user,subscriptions:null==e?void 0:e.subscriptions,updateUser:e=>{t(t=>({...t||{},user:{...t.user||{},...e}})),i.av({id:e.userId,email:e.email})},clearUser:()=>t(e=>({...e||{},user:void 0})),refreshSession:async()=>(0,l.Z)().then(e=>{t(e)}),anonUser:null==e?void 0:e.anonUser,refreshAnonUser:async(e,n)=>(0,o.h)({privateKey:n,anonUserId:e}).then(n=>{t(t=>({...t||{},anonUser:{anonUserId:e,expirationDate:n.challengeExpirationDate}})),i.av({id:e,isAnon:!0})})})),g=()=>{let e=(0,u.useContext)(d);if(!e)throw Error("useSession must be used within SessionStoreProvider");return(0,f.o)(e)};t.default=e=>{let{initialData:t,children:n}=e;(0,u.useEffect)(()=>(0,a.Tv)(t),[t]);let o=(0,u.useRef)();return o.current||(o.current=p(t),r=o.current),(0,s.jsx)(d.Provider,{value:o.current,children:n})}},31750:function(e,t,n){"use strict";n(51073);var r=n(87423);t.Z=(0,r.$)("4f6050e9caf7c9ac64f16c7979ce79be3e6ea7a3")},14677:function(e,t,n){"use strict";n.d(t,{b:function(){return d},h:function(){return p}}),n(51073);var r=n(87423);(0,r.$)("eb6de9efcf601d1cfb68e91b82136e30e826815b");var s=(0,r.$)("3a1c1189bd5998352a51f7ed8eb617e80190f8b9"),o=(0,r.$)("a26aa3cf85520b2365c498f893bd4499cdb00cb8"),a=(0,r.$)("69488d6166bfda07e76cccd2b2ee20f1142f1d83");(0,r.$)("b3ce203802902b0346b07ea24585d17c18e53a68");var i=n(65040),u=n(20530),c=n(89174),f=n.n(c),l=n(52916).lW;async function d(){let e;let t=e=>{let t=new Uint8Array(e);return crypto.getRandomValues(t),t};do e=t(32);while(!f().privateKeyVerify(e));let n=f().publicKeyCreate(e),r=function(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return window.btoa(t)}(e),{anonUserId:o}=await (0,u.Yf)(s)({userPublicKey:n});return{privateKey:r,anonUserId:o}}async function p(e){let{privateKey:t,anonUserId:n}=e,{challenge:r,challengeExpirationTime:s}=await (0,u.Yf)(o)({anonUserId:n}),c=new Uint8Array(r),d=await crypto.subtle.digest("SHA-256",c),p=new Uint8Array(l.from(t,"base64")),{signature:g}=f().ecdsaSign(new Uint8Array(d),p),h=l.from(c).toString("base64"),v=l.from(g).toString("base64");return await a({anonUserId:n,challenge:h,signature:v}),{challenge:h,signature:v,challengeExpirationDate:s?(0,i.g)(s):new Date(0)}}},65040:function(e,t,n){"use strict";function r(e){if(!e)return new Date;let t=new Date(0);return"string"==typeof e.seconds?t.setUTCSeconds(parseInt(e.seconds,10)):"number"==typeof e.seconds&&t.setUTCSeconds(e.seconds),t}n.d(t,{g:function(){return r}})},67629:function(e,t,n){"use strict";n.d(t,{Tv:function(){return a},X6:function(){return u},kG:function(){return i}});var r=n(11883);let s=["/rest/app-chat/conversations/new","/rest/app-chat/conversations/soft/{conversationId}","/rest/app-chat/conversations/{conversationId}/model-responses","/rest/app-chat/conversations/{conversationId}/responses","/rest/app-chat/conversations/{conversationId}/share","/rest/app-chat/conversations/{conversationId}/title","/rest/app-chat/conversations/{conversationId}/user-responses","/rest/app-chat/file-metadata/{fileMetadataId}","/rest/app-chat/image-generations","/rest/app-chat/share_links/{shareLinkId}","/rest/app-chat/share_links/{shareLinkId}/clone","/rest/app-chat/upload-file","/rest/app-chat/conversations","/rest/app-chat/conversations/{conversationId}"];function o(e,t){let n;try{n=new URL(t).pathname}catch(e){n=t}let r=(n=function(e){for(e.startsWith("/")||(e="/"+e);e.endsWith("/");)e=e.substring(0,e.length-1);return e}(n)).slice(15);for(let t of s){let n=t.slice(15);if(function(e,t){let n=e.split("/"),r=t.split("/");if(n.length!=r.length)return!1;for(let e=0;e<n.length;e++){let t=n[e],s=r[e];if(s.startsWith("{")&&s.endsWith("}")){if(""===t)return!1}else if(t!=s)return!1}return!0}(r,n))return{source:"api",endpoint:"".concat(e," ").concat(n)}}return{}}function a(e){e&&(e.user?(0,r.av)({id:e.user.userId,email:e.user.email}):e.anonUser&&(0,r.av)({id:e.anonUser.anonUserId,isAnon:!0}))}async function i(e,t){let n=await fetch(e,t);if(n.status>=400){var s;let a=(null==t?void 0:t.method)||"GET",u="string"==typeof e?e:e instanceof URL?e.href:e.url,c=await n.clone().text().then(e=>{try{return JSON.parse(e)}catch(t){return e}}),f=o(a,u),l=Error(JSON.stringify((null===(s=c.error)||void 0===s?void 0:s.message)||c.error||c));l.name="HttpError ".concat(n.status),Error.captureStackTrace(l,i),(0,r.Tb)(l,{tags:f,extra:{status:n.status,statusText:n.statusText,url:u,method:a,reqBody:null==t?void 0:t.body,body:c}})}return n}function u(e,t){if(e&&e.error){var n;let s=null!==(n=null==t?void 0:t.url)&&void 0!==n?n:"unknown",a=o("POST",s),i=Error(e.error.message||e.error);i.name="StreamError",Error.captureStackTrace(i,u),(0,r.Tb)(i,{tags:a,extra:{...e.error,url:s}})}return e}},44647:function(e,t,n){"use strict";n.d(t,{Gv:function(){return r},Pw:function(){return s}});let r="production",s="production"==r},61247:function(e,t,n){"use strict";var r=n(32108),s=n(79468),o=n(44647);t.default=e=>{let t=(0,r.useLogger)(e),n=(0,s.useMemo)(()=>({environment:o.Gv,route:window.location.href,isClientSide:!0,origin:window.location.origin}),[]);return o.Pw?{flush:t.flush,debug:(e,r)=>t.debug(e,r?{...n,...r}:r),info:(e,r)=>t.info(e,r?{...n,...r}:r),warn:(e,r)=>t.warn(e,r?{...n,...r}:r),error:(e,r)=>t.error(e,r?{...n,...r}:r),logHttpRequest:(e,r,s,o)=>t.logHttpRequest(e,r,s,o?{...n,...o}:o)}:{debug:console.debug,info:console.info,warn:console.warn,error:console.error,flush:()=>{},logHttpRequest:console.info}}},20530:function(e,t,n){"use strict";n.d(t,{Su:function(){return r.S},aH:function(){return s.QueryClientProvider},Yf:function(){return u.Y},e$:function(){return c},sk:function(){return o.sk},Db:function(){return a.default},aM:function(){return i.default}});var r=n(3214),s=n(80785),o=n(44192);n(10957);var a=n(85707),i=n(62090),u=n(97569);n(32108),n(44647),n(61247),n(91124),n(79468);var c=e=>{if(!e)return{message:"Something went wrong."};try{if("object"==typeof e&&"message"in e&&"string"==typeof e.message){let t=e.message,n=e.message.indexOf(" [WKE=");-1!==n&&(t=e.message.substring(0,n));let r="Error: ",s=t.indexOf(r);-1!==s&&(t=t.substring(r.length));let o=t.match(/^\d+\s[A-Z_]+:\s([\s\S]+)/);if(o&&o.length>=1){let e={};if(o[1].split("\n").forEach(t=>{let n=t.split(":").map(e=>e.trim());if(2===n.length){let t=n[0],r=n[1];e[t]||(e[t]=[]),e[t].push(r)}}),Object.keys(e).length>0)return{message:"Please fix the errors before continuing.",details:e};return{message:o[1]}}}}catch(e){}return"string"==typeof e?{message:e}:{message:"Something went wrong."}};n(48464),n(28793)},97569:function(e,t,n){"use strict";n.d(t,{Y:function(){return a}});var r=n(48464);function s(e){let t=/\[WKE=([a-zA-Z0-9\-_]+):([a-zA-Z0-9\-_]+)(:([a-zA-Z0-9\-_]+))?]/g,n=[],r=null;do null!==(r=t.exec(e))&&n.push({error:"".concat(r[1],":").concat(r[2]),field:r[4]});while(null!==r);return n}var o=n(28793);function a(e){return async t=>{let n=await e(t);if(n&&"object"==typeof n&&"error"in n){var a;throw new o.o({status:(0,r.d)(n.error),wellKnownErrors:(a=n.error)&&"object"==typeof a&&"message"in a&&"string"==typeof a.message?s(a.message):"string"==typeof a?s(a):[],message:n.error})}return n}}},48464:function(e,t,n){"use strict";var r,s;n.d(t,{d:function(){return o}}),(s=r||(r={})).Ok="0 OK",s.Cancelled="1 CANCELLED",s.Unknown="2 UNKNOWN",s.InvalidArgument="3 INVALID_ARGUMENT",s.DeadlineExceeded="4 DEADLINE_EXCEEDED",s.NotFound="5 NOT_FOUND",s.AlreadyExists="6 ALREADY_EXISTS",s.PermissionDenied="7 PERMISSION_DENIED",s.ResourceExhausted="8 RESOURCE_EXHAUSTED",s.FailedPrecondition="9 FAILED_PRECONDITION",s.Aborted="10 ABORTED",s.OutOfRange="11 OUT_OF_RANGE",s.Unimplemented="12 UNIMPLEMENTED",s.Internal="13 INTERNAL",s.Unavailable="14 UNAVAILABLE",s.DataLoss="15 DATA_LOSS",s.Unauthenticated="16 UNAUTHENTICATED";let o=e=>{if(e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message){for(let t in r)if(isNaN(Number(t))){let n=r[t];if(e.message.includes(n))return n}}}},28793:function(e,t,n){"use strict";n.d(t,{o:function(){return r}});class r extends Error{constructor({status:e,wellKnownErrors:t,message:n}){super(n),this.status=e,this.wellKnownErrors=t}}},10957:function(e,t,n){"use strict";var r=n(74693),s=n(97569);t.default=(e,t)=>(e.queryFn&&"function"==typeof e.queryFn&&(e.queryFn=(0,s.Y)(e.queryFn)),(0,r.useInfiniteQuery)(e,t))},85707:function(e,t,n){"use strict";var r=n(11681),s=n(97569);t.default=(e,t)=>(e.mutationFn&&(e.mutationFn=(0,s.Y)(e.mutationFn)),(0,r.useMutation)(e,t))},62090:function(e,t,n){"use strict";var r=n(3304),s=n(97569);t.default=(e,t)=>(e.queryFn&&"function"==typeof e.queryFn&&(e.queryFn=(0,s.Y)(e.queryFn)),(0,r.useQuery)(e,t))}}]);